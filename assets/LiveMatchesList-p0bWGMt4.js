import{r as p,j as e}from"./index-Du-mbmiG.js";import{G as E,M as c,u as j,a as w}from"./index-BynByDyd.js";import{A as d}from"./constants-BzkP2l18.js";function u(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}const g=async t=>{try{t({type:c.FETCH_MATCHES_LIST_REQUEST});const a=await fetch(`${d}/matches`);if(!a.ok)throw new Error("Error while fetching live matches");const l=(await a.json()).matches.filter(n=>n.isRunning).map(async n=>{const i=await fetch(`${d}/matches/${n.id}`);if(!i.ok)throw new Error("Network response for match details was not ok.");return i.json()}),s=await Promise.all(l);t({type:c.FETCH_MATCHES_LIST_SUCCESS,payload:s})}catch(a){console.error("Error fetching live matches and details:",a),t({type:c.FETCH_MATCHES_LIST_FAILURE,payload:"Unable to fetch live matches and details"})}},v=async(t,a)=>{try{const r=await fetch(`${d}/matches/${a}`);if(!r.ok)throw new Error("Error while refreshing match");const o=await r.json();t({type:c.REFRESH_MATCH_SUCCESS,payload:[o]})}catch(r){console.error(`Error refreshing match with ID ${a}:`,r),t({type:c.FETCH_MATCHES_LIST_FAILURE,payload:"Unable to refresh match"})}},S=()=>{const{matches:t,isLoading:a,isError:r}=j(),o=w();p.useEffect(()=>{g(o)},[o]);const l=async s=>{v(o,s)};return e.jsxs("div",{className:"p-3 border border-none rounded-lg shadow-sm md:-mt-10 shadow-black md:m-5 bg-gradient-to-r from-red-700 to-green-700",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold md:text-2xl md:text-white",children:"Live Matches"}),e.jsx("div",{className:"overflow-x-auto ",children:e.jsxs("div",{className:" w-max",children:[a&&e.jsx("p",{children:"Loading..."}),r&&e.jsx("p",{children:"Error fetching live matches"}),!a&&!r&&e.jsx("ul",{className:"flex space-x-3 md:flex",children:t.filter(s=>s.isRunning).map(s=>{var n,i,h,m,f,x;return e.jsxs("li",{className:"p-4 mr-4 bg-gray-100 border rounded-lg shadow-lg border-10 border-black-900 ",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-serif font-semibold md:text-xl",children:s.sportName}),e.jsx("button",{onClick:()=>l(s.id),children:e.jsx(u,{})})]}),e.jsx("p",{className:"md:text-lg",children:s.location}),e.jsx("div",{className:"text-left md:font-medium ",children:e.jsxs("p",{children:[(n=s.teams[0])==null?void 0:n.name,e.jsxs("span",{children:["  ( ",(h=s.score)==null?void 0:h[(i=s.teams[0])==null?void 0:i.name],"* ) "]})]})}),e.jsx("div",{className:"text-left md:font-medium ",children:e.jsxs("p",{children:[(m=s.teams[1])==null?void 0:m.name,e.jsxs("span",{children:["  ( ",(x=s.score)==null?void 0:x[(f=s.teams[1])==null?void 0:f.name],"* ) "]})]})})]},s.id)})})]})})]})};export{S as default};
