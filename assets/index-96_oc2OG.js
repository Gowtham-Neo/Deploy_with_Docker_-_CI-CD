import{r as l,u as p,j as e}from"./index-Du-mbmiG.js";import{A as x}from"./constants-BzkP2l18.js";import{i as f}from"./signup-DsrggD20.js";const h=()=>{const d=localStorage.getItem("auth_token"),[a,i]=l.useState(""),[o,c]=l.useState(""),[n,s]=l.useState(null),u=p(),m=async r=>{if(r.preventDefault(),!a||!o){s("Please fill in both fields.");return}try{const t=await fetch(`${x}/user/password`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({current_password:a,new_password:o})});t.status===401?(s("Password update failed. Please try again later."),setTimeout(()=>{s("")},3e3)):t.ok?u("/"):(s("Incorrect current password. Please try again."),setTimeout(()=>{s("")},3e3),console.log("Incorrect password {A}{B}"))}catch(t){console.error("Update failed:",t)}};return e.jsx("div",{children:e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-gray-700",children:"Current Password:"}),e.jsx("input",{type:"password",name:"current_password",id:"current_password",value:a,onChange:r=>i(r.target.value),className:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-md focus:outline-none focus:border-blue-500 focus:shadow-outline-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-gray-700",children:"New Password:"}),e.jsx("input",{type:"password",name:"password",id:"password",value:o,onChange:r=>c(r.target.value),className:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-md focus:outline-none focus:border-blue-500 focus:shadow-outline-blue"})]}),n&&e.jsx("p",{className:"text-red-500",children:n}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 mt-4 font-semibold text-white bg-blue-700 rounded-md hover:bg-blue-800 focus:outline-none focus:shadow-outline-gray",children:"Update"})]})})},y=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"flex flex-col w-full max-w-xl px-6 py-8 bg-white border-4 border-gray-300 border-dotted rounded-lg shadow-md md:flex-row",children:[e.jsx("div",{className:"border-r md:w-full",children:e.jsx("img",{src:f,alt:"ChangePassword",className:"object-cover w-full h-full rounded-r-lg"})}),e.jsxs("div",{className:"p-4 md:w-full ",children:[e.jsxs("h1",{className:"mb-8 text-3xl font-bold text-center text-gray-800 ",children:["Update Password"," "]}),e.jsx(h,{})]})]})});export{y as default};
